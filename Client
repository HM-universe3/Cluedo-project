import pygame
from pygame.locals import Rect
import random
import sys

pygame.init()
# import Network
# import Server

width = 600
height = 600
WIN = pygame.display.set_mode((width, height))
pygame.display.set_caption("Client")

clientNumber = 0

class Player():
  def __init__(self, x, y, width, height, colour, name):
    self.x = x
    self.y = y
    self.width = width
    self.height = height
    self.colour = colour
    self.rect = (self.x,self.y,self.width,self.height)
    self.velocity = 0.5
    self.name = name
    self.inventory = []
  def draw(self, WIN):
    pygame.draw.rect(WIN, self.colour, self.rect)

  def move(self):
    keys = pygame.key.get_pressed()
    if keys[pygame.K_LEFT] or keys[pygame.K_a]:
      self.x -= self.velocity

    if keys[pygame.K_RIGHT] or keys[pygame.K_d]:
      self.x += self.velocity

    if keys[pygame.K_UP] or keys[pygame.K_w]:
      self.y -= self.velocity

    if keys[pygame.K_DOWN] or keys[pygame.K_s]:
      self.y += self.velocity

    self.rect = (self.x,self.y,self.width,self.height)

  def pickUpItem(self, item):
    self.inventory.append(item)
    print(f"{self.name} picked up {item.name}")


  def viewInventory(self):
    if self.inventory:
      print(f"{self.name}'s Inventory")
      for item in self.inventory:
        print(item.name) #only prints the name

    else:
      print(f"{self.name}'s inventory is empty")


class Card(Player):
  def __init__(self, cardName):
    self.name = cardName
    self.x = 60
    self.y = 60
    self.width = 50
    self.height = 70
    self.colour = (139, 0, 0)
    self.rect = (self.x, self.y, self.width, self.height)
    

  def draw(self, WIN):
    pygame.draw.rect(WIN, self.colour, self.rect)
    


#MainBackground = pygame.image.load("Fountain image.png")

def redrawWindow(WIN, player):
  MainBackground = pygame.image.load("Fountain image.png")
  MainBackground = pygame.transform.scale(MainBackground, (width, height))
  WIN.blit(MainBackground, (0, 0))
  player.draw(WIN)
  pygame.display.update()



def main():
  #background = pygame.transform.scale(background, (width * 2, height * 2))
  run = True
  p = Player(50, 50, 50, 50, (0, 255, 0), "Player 1")
  with open("CardList.txt") as file:
    cardsNotFound = [line.rstrip() for line in file]
  for i in cardsNotFound:
    i = Card(i)
  while run:
    for event in pygame.event.get():
      if event.type == pygame.QUIT:
        run = False
        pygame.quit()
    p.move()
    #if p.self.x < 0 or p.self.x > width - p.self.rect or p.self.y < 0 or p.self.y > height - p.self.rect:
      #WIN.
      #need to find background x and y values and speed and then use background x - background speed to update it as the player hits the edge of the screen
      #pass
    Fountain = Card("Fountain")
    Fountain.draw(WIN)
    redrawWindow(WIN, p)
    player_rect = Rect(p.rect)
    Fountain_rect = Rect(Fountain.rect)
    redrawWindow(WIN, Fountain)
    if player_rect.pygame.colliderect(Fountain_rect):
      p.inventory.append(Fountain)
      #cardsNotFound.remove(Fountain.name)
      
      

    pygame.display.update()
    pygame.time.Clock().tick(450)
main()

pygame.quit()
sys.exit()
